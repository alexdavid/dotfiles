#!/usr/bin/env bash

if [ -f ~/.config/isdark ]; then
  THEME=dark
else
  THEME=light
fi

while read ID; do
  RANDOM_IMAGE=$(ls "$HOME/.config/wallpaper/images/$THEME" | shuf -n 1)
  WALLPAPER_IMAGE="$HOME/.config/wallpaper/images/$THEME/$RANDOM_IMAGE"
  swaymsg "output $ID bg $WALLPAPER_IMAGE fill"
done < <(swaymsg -t get_outputs | jq -r 'map(.name) | join("\n")')
